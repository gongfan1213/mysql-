https://javaguide.cn/java/io/io-model.html#aio-asynchronous-i-o

# Java IO 模型详解
IO 模型理解需结合计算机底层知识，本文旨在清晰讲解 IO 相关概念与 Java 中的常见 IO 模型，若有补充、完善或修改建议，欢迎在评论区指出，共同进步。


## 一、前言
I/O 是许多开发者难以理解的知识点，本文将从基础概念到实际模型，逐步拆解 I/O 相关内容，帮助读者建立清晰认知。


## 二、I/O 基础概念
### 1. 何为 I/O？
I/O（Input/Output）即**输入／输出**，可从**计算机结构**和**应用程序**两个视角解读：
- **计算机结构视角**：  
  根据冯·诺依曼结构，计算机分为运算器、控制器、存储器、输入设备、输出设备 5 大部分。输入设备（如键盘）向计算机输入数据，输出设备（如显示器）接收计算机输出数据；网卡、硬盘等设备既可作为输入设备，也可作为输出设备。因此，I/O 描述了计算机系统与外部设备之间的通信过程。

- **应用程序视角**：  
  操作系统为保证稳定性和安全性，将进程地址空间划分为**用户空间（User space）** 和**内核空间（Kernel space）**。应用程序运行在用户空间，无法直接执行文件管理、进程通信、内存管理等系统级操作，需通过**系统调用**请求内核空间完成。  
  日常开发中常见的 I/O 场景为**磁盘 IO（读写文件）** 和**网络 IO（网络请求/响应）**，应用程序仅发起 IO 调用，具体 IO 执行由操作系统内核完成。  

  应用程序发起 I/O 调用后，需经历两个核心步骤：
  1. 内核等待 I/O 设备准备好数据；
  2. 内核将数据从内核空间拷贝到用户空间。


### 2. 常见的 IO 模型（UNIX 系统）
UNIX 系统下，IO 模型共 5 种，也是行业内普遍提及的 IO 模型分类：
- 同步阻塞 I/O
- 同步非阻塞 I/O
- I/O 多路复用
- 信号驱动 I/O
- 异步 I/O


## 三、Java 中 3 种常见 IO 模型
### 1. BIO (Blocking I/O)
- **所属模型**：同步阻塞 IO 模型。  
- **核心逻辑**：应用程序发起 `read` 调用后，会一直阻塞，直到内核将数据从内核空间拷贝到用户空间，期间线程无法执行其他任务。  
- **适用场景**：客户端连接数量较少的场景，面对十万、百万级高并发连接时，传统 BIO 模型无法应对。


### 2. NIO (Non-blocking/New I/O)
- **引入背景**：Java 1.4 中引入，对应 `java.nio` 包，提供 `Channel`、`Selector`、`Buffer` 等抽象；N 可理解为 Non-blocking（非阻塞），而非单纯的 New，支持面向缓冲、基于通道的 I/O 操作，适用于高负载、高并发（网络）应用。  
- **所属模型争议**：可看作**I/O 多路复用模型**，也有观点认为属于同步非阻塞 IO 模型，需结合两种模型的逻辑对比分析：

  #### （1）同步非阻塞 IO 模型
  - **核心逻辑**：应用程序发起 `read` 调用后，若数据未准备好，线程不阻塞，可切换执行其他小计算任务，之后通过“轮询”方式反复发起 `read` 调用；当内核准备好数据后，`read` 调用仍会阻塞，直到数据从内核空间拷贝到用户空间。  
  - **优势**：相比同步阻塞 IO，通过轮询间隙利用，提升了线程利用率；  
  - **缺陷**：应用程序频繁发起 I/O 系统调用轮询数据状态，会大量消耗 CPU 资源。

  #### （2）I/O 多路复用模型
  - **核心逻辑**：线程先发起 `select` 调用（或 `epoll` 调用），询问内核数据是否准备就绪；待内核准备好数据后，用户线程再发起 `read` 调用（数据从内核空间到用户空间的过程仍阻塞）。  
  - **关键系统调用**：
    - `select`：内核提供的系统调用，支持一次查询多个系统调用的可用状态，几乎所有操作系统都支持；
    - `epoll`：Linux 2.6 内核推出的 `select` 增强版，优化了 IO 执行效率。  
  - **优势**：通过减少无效系统调用，降低 CPU 资源消耗。

  #### （3）Java NIO 的核心机制
  Java NIO 的核心是**选择器（Selector，又称多路复用器）**，通过一个线程即可管理多个客户端连接；仅当客户端数据到达时，才为其分配资源处理，避免无效等待。  
  核心组件关系：`Buffer`（数据容器）、`Channel`（数据传输通道）、`Selector`（多路复用器）协同工作，实现高效 IO 操作。


### 3. AIO (Asynchronous I/O)
- **引入背景**：AIO 即 NIO 2，Java 7 中引入，是纯粹的**异步 IO 模型**。  
- **核心逻辑**：基于事件和回调机制实现，应用程序发起 IO 操作后直接返回（不阻塞）；当操作系统后台完成 IO 处理后，会通知相应线程执行后续操作。  
- **应用现状**：目前应用范围较窄，例如 Netty 曾尝试使用 AIO，但在 Linux 系统上性能提升不明显，最终未大规模采用。


## 四、参考资料
1. 《深入拆解 Tomcat & Jetty》
2. 如何完成一次 IO：[https://llc687.top/126.html](https://llc687.top/126.html)
3. 程序员应该这样理解 IO：[https://www.jianshu.com/p/fa7bdc4f3de7](https://www.jianshu.com/p/fa7bdc4f3de7)
4. 10 分钟看懂， Java NIO 底层原理：[https://www.cnblogs.com/crazymakercircle/p/10225159.html](https://www.cnblogs.com/crazymakercircle/p/10225159.html)
5. IO 模型知多少 | 理论篇：[https://www.cnblogs.com/sheng-jie/p/how-much-you-know-about-io-models.html](https://www.cnblogs.com/sheng-jie/p/how-much-you-know-about-io-models.html)
6. 《UNIX 网络编程 卷 1：套接字联网 API 》6.2 节 IO 模型


## 网页关联信息
- 所属网站：JavaGuide（含面试指南、开源项目、技术书籍等栏目）
- 同系列内容：上一页《Java IO 设计模式总结》、下一页《Java NIO 核心知识总结》
- 最近更新：2025/7/13 18:36
- 贡献者：guide、afon、Aaron Ge、anaer、sam、Mr.Hope、yanjunlin、seaflower
- 备案信息：鄂ICP备2020015769号-1
- 版权信息：Copyright © 2025 Guide
